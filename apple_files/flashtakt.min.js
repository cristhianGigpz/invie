/*! flashtakt.js 2.7.4 */
!function(a){function b(a,b){var c;for(c in b)a[c]=b[c];return b}function c(a,c,d){return a.prototype=new c,b(a.prototype,d),a}function d(a,b,c){b.addEventListener?b.addEventListener(a,c):b.attachEvent("on"+a,c)}function e(b){a.removeEventListener?a.removeEventListener(b):a.detachEvent("on"+b)}function f(a){return"[object Function]"===Object.prototype.toString.call(a)}function g(){return!("undefined"==typeof VZCSCORE)}var h=function(){var b=function(b){this.player=b,this.callbacksStorage=a,this.callbackNames=[],this.api_methods=["play2","pause","playPause","seekTo","getTime","getTotalTime","setVolume","getVolume","muteOn","muteOff","muteToggle","getMute","loadVideo","playlistPlay"]};return b.prototype={addEvent:d,removeEvent:e,hasCallback:function(a){for(var b=0;b<this.callbackNames.length;b++)if(this.callbackNames[b]===a)return!0;return!1},storeCallback:function(a){this.hasCallback(a)||this.callbackNames.push(a)},removeCallback:function(a){for(var b=0;b<this.callbackNames.length;b++)this.callbackNames[b]===a&&delete this.callbackNames[b]},api:function(b,c,d){if(this.isMethodValid(b)){var e=this.callAPImethod(b,c);if(void 0!==e&&null!==e){var f=d.source,g=a.name,h=d.origin,i=this.buildCallbackMessage(b,e,g);f.postMessage(i,h)}}else console.log("Vzaar Player: invalid API method")},handleMethod:function(a){return this.player[a]()},handleParamMethod:function(a,b){return this.player[a](b)},callAPImethod:function(a,b){return void 0!==b&&null!==b?this.handleParamMethod(a,b):this.handleMethod(a)},isMethodValid:function(a){for(var b=0;b<this.api_methods.length;b++)if(this.api_methods[b]==a)return!0;return!1},attachCallback:function(a,b){this.addEvent(a,this.player,b)},buildCallbackMethod:function(b,c){var d=c.source,e=a.name,f=c.origin,h=this;return function(c){if(g()&&"mediaStarted"===c&&a.comScoreCallback("mediaStarted"),h.hasCallback(b)){var i=h.buildCallbackMessage(b,c,e);d.postMessage(i,f)}}},buildCallbackMessage:function(a,b,c){var d=JSON.stringify({method:a,value:b,player_id:c});return d},sendReadyMessage:function(){g()&&this.player.addEventListener("playState","comScoreCallback");var b=this.buildCallbackMessage("ready",void 0,a.name);a.parent.postMessage(b,document.referrer)},createCallback:function(a){var b=a.callbackName,c=a.callback,d=a.msg;this.callbacksStorage[c]=this.buildCallbackMethod(b,d)},connect:function(){var b=this;this.addEvent("message",a,function(a){try{var c=JSON.parse(a.data),d=c.method,e=void 0!==c.value?c.value:null;if("addEventListener"===d){var f=e,g=f+"Callback";b.storeCallback(f),b.createCallback({callbackName:f,callback:g,msg:a}),b.attachCallback(f,g)}else"removeEventListener"===d?b.removeCallback(e):b.api(d,e,a)}catch(h){}}),this.sendReadyMessage()}},b}(),i=function(){var a=function(a){this.V=a,this.player=a.getPlayers().vzaarvid,this.callbacksStorage={},this.mediaStarted=!1},b=function(a,b){return a.toFixed(b||3)},d={play2:function(){this.player.play()},pause:function(){this.player.pause()},muteOn:function(){this.player.muted(!0)},muteOff:function(){this.player.muted(!1)},getTime:function(){return b(this.player.currentTime(),2)},getTotalTime:function(){return b(this.player.duration(),2)},getMute:function(){return this.player.muted()},getVolume:function(){return 5*this.player.volume()},playPause:function(){this.player.paused()?this.player.play():this.player.pause()},muteToggle:function(){this.player.muted()?this.player.muted(!1):this.player.muted(!0)},setVolume:function(a){return function(){this.player.volume(.2*a)}},seekTo:function(a){return function(){var b=this.player;b.paused();b.currentTime(a),b.one("loadedmetadata",function(){b.currentTime(a)})}},playlistPlay:function(a){this.player.play()},loadVideo:function(a){return function(){var b=vzaar.utils.setVideoApiUrl(a);vzaar.utils.loadVideoDataJSON(b).then(function(a){var b=vzaar.processVideoPluginData(a);vzaar.utils.switchVideoSource(b,b.videoTitle)})["catch"](function(a){vzaar.utils.log.error(a.message)})}}},e={progress:function(a){var b=this.player,c=0,d=function(){if(!b.showingAd){var d,e,f,g=Math.floor(b.duration()),h=Math.ceil(b.currentTime());h>0&&(e=Math.floor(h/g*10),f=e.toString(),e>c&&(c+=1,d=c+"0percent",a(d)))}};b.addEvent("timeupdate",d)},playState:function(a){var b=this.player;vzaar.playerEvents.playerFirstPlayPromise.then(function(){a("mediaStarted"),a("mediaPlaying"),$(document).on("play.playerEvents",function(){b.showingAd||(lastEvent="play",a("mediaPlaying"))})}),$(document).on("pause.playerEvents",function(){b.showingAd||(lastEvent="pause",a("mediaPaused"))}),$(document).on("ended.playerEvents",function(){"ended"===lastEvent||b.showingAd||(lastEvent="ended",playbackTriggered=!1,a("mediaEnded"))})},interaction:function(a){var b=this.player,c=function(c){var d=b.duration(),e=b.currentTime();e!=d&&0!==e&&a(c)};this.hasCallback("playState")||(b.addEvent("playing",function(){b.showingAd||c("resume")}),b.addEvent("pause",function(){b.showingAd||c("pause")}),b.addEvent("fullscreenchange",function(){var c=b.isFullscreen()?"fullscreenon":"fullscreenoff";a(c)}),b.addEvent("volumechange",function(){var c=b.muted()?"soundOff":"soundOn";a(c)}),b.addEvent("seeking",function(){b.showingAd||c("seekbarhandle")}))}};return c(a,h,{handleMethod:function(a){return d[a].call(this)},handleParamMethod:function(a,b){return d[a](b).call(this)},attachCallback:function(a,b){var c=this.callbacksStorage[b],d=e[a];d&&f(d)&&d.call(this,c)},sendReadyMessage:function(){var a=h.prototype.sendReadyMessage,b=this;this.player.ready(function(){a.call(b)})}}),a}();vzaar.playerEvents.playerReadyPromise.then(function(a){var b;"html5"===vzaar.playerData.playerType?(b=new i(videojs),b.player.addEvent=function(a,c){b.player.on.call(b.player,a,c)},b.player.isFullScreen=function(){return b.player.isFullscreen()},b.connect()):(b=new h(vzaar.currentVideoData.player),b.connect())})}(window);